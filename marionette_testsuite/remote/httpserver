#!/usr/bin/env python
# coding: utf-8

import sys

from twisted.web import server, resource
from twisted.internet import reactor
from twisted.python import log

sys.path.append('.')

import marionette_tg.conf

LOCAL_PORT = int(sys.argv[1])


class GetResource(resource.Resource):
    isLeaf = True

    def render_GET(self, request):
        retval = ''
        for x in range(2**18):
            retval += '_' + str(x)
        return retval

if __name__ == "__main__":
    if marionette_tg.conf.get("general.debug"):
        log.startLogging(sys.stdout)

    reactor.listenTCP(LOCAL_PORT, server.Site(GetResource()))
    reactor.run()
